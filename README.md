# Анализатор публикационной активности автора по данным elibrary
Этот проект представляет собой приложение для анализа публикационной деятельности автора по данным с сайта [elibrary.ru](https://elibrary.ru). Он представляет минимальный графический пользовательский интерфейс (GUI) в котором можно загрузить файл с authorId's и выбрать файл `.md` для сохранения готового результата в формате таблицы. Проект использует библиотеку `log4j` для логирования как в консоль так и в отдельный файл.

## Особенности
- **Анализ публикационной деятельности:** Приложения ищет и анализирует автора для последующего сохранения его authorId, ФИО, кол-ва статей, кол-ва статей без цитированний, индекса Хирша.
- **GUI:** Удобный минимальный интерфейс, созданный с использованием JavaFX, который позволяет загружать список из авторов и выбирать файл для сохранения результатов.
- **CLI:** Простой инструмент командной строки который использует список авторов и файл для сохранения готовой информации при обаружении таковых в параметрах запуска.
- **Кэширование:** Приложение хранит данные всех ранее запрошенных авторов в базе данных sqlite. Вы можете получить её в [релизах](https://github.com/Gettody/elibrary_analyzer/releases) и поместить рядом с `jar` или в корень репозитория.
- **Логирование:** Все действия, проблемы и ошибки логируются как в консоль, так и в файл логов в корневой папке приложения с использованием бибилиотеки `log4j`.
- **Документация:** Проект имеет документацию по своему исходному коду, для его генерации, необходимо выполнить `./gradlew javadoc` в корне проекта
- **Самодостаточная сборка:** Проект предполагает сборку в самодостаточный `.jar` архив для дальнейшего использования, без инструментов разработки.

## Требования
- JDK 17 или выше
- Gradle (сборка и управление зависимостями)
- JavaFx (для GUI)

## Установка
### 1. Клонирование репозитория
```bash
git clone https://github.com/Gettody/elibrary_analyzer/
cd elibrary_analyzer
```
### 2. Сборка проекта с помощью Gradle
#### Сборка fatJar с JavaFX
> **⚠️ ВАЖНО:**  JavaFX имеет нативные компоненты отдельные для каждой ОС, поэтому собранный этим способом `jar` в Windows, на Linux не запустится.
```bash
./gradlew fullShadowJar
```
#### Сборка fatJar **БЕЗ** JavaFX
```bash
./gradlew shadowJar
```
### 3. Запуск проекта
Все собранные `jar` хранятся в `/build/libs`
#### Используйте файл конфигурации
- Создайте файл `analyzer.config` в одном каталоге с запускаемым `jar`.
- В нём должна находится ссылка на Ваш веб прокси
> Учитывайте, что после него будет вставлять ссылка на анализируемые страницы.

Пример файла конфигурации:
```analyzer.config
web_proxy = https://example.proxy/apikey/url=
```
**Он также доступен в [репозитории](analyzer.config)**
#### Создайте список авторов
- Создайте файл txt где запишите authorIds авторов через `,`
```
937895, 178142, 1014176, 1014185, 1024173, 1014473, 1014163, 128964, 128962
```
#### Запуск fatJar с JavaFX
```bash
cd ./build/libs
java -jar ./elibrary-parser-full-1.0.jar
```
#### Запуск fatJar **БЕЗ** JavaFX
Скачайте JavaFx SDK 17.0.13 c [официального сайта]([https://elibrary.ru](https://gluonhq.com/products/javafx/)) для Вашей платформы и распакуйте.
```bash
cd ./build/libs
java --module-path /ваш/путь/до/javafx/lib --add-modules javafx.controls,javafx.fxml -jar .\elibrary-parser-1.0.jar
```
#### Запуск в режиме CLI
процедура не отличается от предыдущий пунктов, но, необходимо указать следующие при запуске:
```bash
--no-graphics -i путь_до_файла_с_авторами.**txt** -o путь_до_файла_вывода.**md**
```
## Демонстрация
[видео](public/demo.mp4)

![видео-демо](public/demo.gif)

## Логирование
Логи сохраняются в файл `log` в одном котологе с jar. Файл логов содержит информацию о действиях приложения, включая загрузку файлов, анализ авторов и возможные ошибки.

Вывод в консоль отображает логи в реальном времени.

Файл `log` содержит записи обо всех логах во время работы приложения.

Логи включают следующие уровни:

- INFO: Общая информация о состоянии приложения и процессе.
- DEBUG: Подробная информация, полезная для отладки.
- WARN: Предупреждения о потенциальных проблемах.
- ERROR: Ошибки, возникшие при выполнении.

## Зависимости
Проект использует следующие зависимости:

- **log4j2**: Для логирования.
- **JavaFX**: Для создания графического интерфейса.
- **RestAssured:** Для запросов к сайтам.
- **SQLite:** Для управления базой данных.
- **Lombok:** Для удобства при разработке.
- Эти зависимости управляются через **Gradle**.

## Структура проекта
```  
├── analyzer.config         # Конфигурационный файл elibrary_parser
├── build.gradle            # Конфигурация сборки Gradle
├── gradle                  # Обёртка Gradle
├── gradlew                 # Исполняемый файл сборщика
├── public                  # Доп. файлы репозитория
├── README.md               # Прочитай меня :3
└── src
    └── main
        ├── java            # Исходный код Java
        └── resources       # Файлы конфигурации (log4j2.xml)
```
